#!/usr/bin/env php
<?php
/**
 * Yii console bootstrap file.
 */

defined('YII_DEBUG') or define('YII_DEBUG', true);
defined('YII_ENV') or define('YII_ENV', 'dev');

require __DIR__ . '/vendor/autoload.php';
// Load .env only if present, and ignore parse errors (CI may set env vars directly)
$envFile = __DIR__ . '/.env';
if (file_exists($envFile)) {
    try {
        $dotenv = Dotenv\Dotenv::createImmutable(__DIR__);
        $dotenv->safeLoad();
    } catch (\Throwable $e) {
        // Ignore dotenv parsing errors in CI; environment variables are set by CI instead
        fwrite(STDERR, "Warning: failed to load .env: " . $e->getMessage() . PHP_EOL);
    }
}

require __DIR__ . '/vendor/yiisoft/yii2/Yii.php';
require __DIR__ . '/config/console.php';

$config = require __DIR__ . '/config/console.php';

$application = new yii\console\Application($config);
$exitCode = $application->run();
exit($exitCode);
